<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Plot a flowchart of the sample size flow in a match_time object — plot_flowchart • MatchTime</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Plot a flowchart of the sample size flow in a match_time object — plot_flowchart"><meta name="description" content="This function is an attempt at creating a CONSORT style flowchart for the sequential time-dependent matching methods implemented in this package. It shows the number of potential cases and potential controls as filtered throughout the matching process. Some of the included numbers may seem confusing at first glance. See details for more information."><meta property="og:description" content="This function is an attempt at creating a CONSORT style flowchart for the sequential time-dependent matching methods implemented in this package. It shows the number of potential cases and potential controls as filtered throughout the matching process. Some of the included numbers may seem confusing at first glance. See details for more information."><meta property="og:image" content="https://robindenz1.github.io/MatchTime/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">MatchTime</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/creating_start_stop_data.html">Creating and Dealing with Start-Stop Data in R</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/RobinDenz1/MatchTime/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Plot a flowchart of the sample size flow in a <code>match_time</code> object</h1>

      <div class="d-none name"><code>plot_flowchart.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function is an attempt at creating a CONSORT style flowchart for the sequential time-dependent matching methods implemented in this package. It shows the number of potential cases and potential controls as filtered throughout the matching process. Some of the included numbers may seem confusing at first glance. See details for more information.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">plot_flowchart</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  digits<span class="op">=</span><span class="fl">2</span>,</span>
<span>  n_fontface<span class="op">=</span><span class="st">"italic"</span>,</span>
<span>  inclusion_text<span class="op">=</span><span class="cn">NULL</span>,</span>
<span>  remove_0_lines<span class="op">=</span><span class="cn">TRUE</span>,</span>
<span>  remove_0_boxes<span class="op">=</span><span class="cn">FALSE</span>,</span>
<span>  perc_inclusion<span class="op">=</span><span class="cn">TRUE</span>,</span>
<span>  perc_inclusion_total<span class="op">=</span><span class="cn">FALSE</span>,</span>
<span>  perc_other<span class="op">=</span><span class="cn">FALSE</span>,</span>
<span>  perc_type<span class="op">=</span><span class="st">"all"</span>,</span>
<span>  number_format<span class="op">=</span><span class="va">format</span>,</span>
<span>  box_main_style<span class="op">=</span><span class="st">"n_last"</span>,</span>
<span>  box_main_text<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  box_main_halign<span class="op">=</span><span class="fl">0.5</span>,</span>
<span>  box_main_nudge_x<span class="op">=</span><span class="fl">0</span>,</span>
<span>  box_main_nudge_y<span class="op">=</span><span class="fl">0</span>,</span>
<span>  box_main_padding<span class="op">=</span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5.5</span>, <span class="fl">5.5</span>, <span class="fl">5.5</span>, <span class="fl">5.5</span><span class="op">)</span>, <span class="st">"pt"</span><span class="op">)</span>,</span>
<span>  box_main_margin<span class="op">=</span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>, <span class="st">"pt"</span><span class="op">)</span>,</span>
<span>  box_main_r<span class="op">=</span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fl">5.5</span>, <span class="st">"pt"</span><span class="op">)</span>,</span>
<span>  box_main_width<span class="op">=</span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fl">2</span>, <span class="st">"inch"</span><span class="op">)</span>,</span>
<span>  box_main_minwidth<span class="op">=</span><span class="cn">NULL</span>,</span>
<span>  box_main_maxwidth<span class="op">=</span><span class="cn">NULL</span>,</span>
<span>  box_main_height<span class="op">=</span><span class="cn">NULL</span>,</span>
<span>  box_main_minheight<span class="op">=</span><span class="cn">NULL</span>,</span>
<span>  box_main_maxheight<span class="op">=</span><span class="cn">NULL</span>,</span>
<span>  box_main_colour<span class="op">=</span><span class="st">"black"</span>,</span>
<span>  box_main_fill<span class="op">=</span><span class="st">"lightblue"</span>,</span>
<span>  box_sec_text<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  box_sec_halign<span class="op">=</span><span class="fl">0</span>,</span>
<span>  box_sec_nudge_x<span class="op">=</span><span class="va">box_main_nudge_x</span>,</span>
<span>  box_sec_nudge_y<span class="op">=</span><span class="va">box_main_nudge_y</span>,</span>
<span>  box_sec_padding<span class="op">=</span><span class="va">box_main_padding</span>,</span>
<span>  box_sec_margin<span class="op">=</span><span class="va">box_main_margin</span>,</span>
<span>  box_sec_r<span class="op">=</span><span class="va">box_main_r</span>,</span>
<span>  box_sec_width<span class="op">=</span><span class="va">box_main_width</span>,</span>
<span>  box_sec_minwidth<span class="op">=</span><span class="va">box_main_minwidth</span>,</span>
<span>  box_sec_maxwidth<span class="op">=</span><span class="va">box_main_maxwidth</span>,</span>
<span>  box_sec_height<span class="op">=</span><span class="va">box_main_height</span>,</span>
<span>  box_sec_minheight<span class="op">=</span><span class="va">box_main_minheight</span>,</span>
<span>  box_sec_maxheight<span class="op">=</span><span class="va">box_main_maxheight</span>,</span>
<span>  box_sec_colour<span class="op">=</span><span class="va">box_main_colour</span>,</span>
<span>  box_sec_fill<span class="op">=</span><span class="st">"cornsilk"</span>,</span>
<span>  line_main_colour<span class="op">=</span><span class="st">"black"</span>,</span>
<span>  line_main_linetype<span class="op">=</span><span class="st">"solid"</span>,</span>
<span>  line_main_linewidth<span class="op">=</span><span class="fl">0.5</span>,</span>
<span>  line_sec_colour<span class="op">=</span><span class="va">line_main_colour</span>,</span>
<span>  line_sec_linetype<span class="op">=</span><span class="st">"dashed"</span>,</span>
<span>  line_sec_linewidth<span class="op">=</span><span class="va">line_main_linewidth</span>,</span>
<span>  arrow<span class="op">=</span><span class="cn">TRUE</span>,</span>
<span>  arrow_type<span class="op">=</span><span class="st">"closed"</span>,</span>
<span>  arrow_angle<span class="op">=</span><span class="fl">30</span>,</span>
<span>  arrow_vjust<span class="op">=</span><span class="op">-</span><span class="fl">0.4</span>,</span>
<span>  arrow_size<span class="op">=</span><span class="fl">0.1</span>,</span>
<span>  xlim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">20</span>, <span class="fl">20</span><span class="op">)</span>,</span>
<span>  ylim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">6</span>, <span class="fl">11</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <p></p>
<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>A <code>match_time</code> object created using the <code><a href="match_time.html">match_time</a></code> function.</p></dd>

  <dt id="arg-digits">digits<a class="anchor" aria-label="anchor" href="#arg-digits"></a></dt>
<dd><p>A single integer, specifying the number of digits the percentages should be rounded to.</p></dd>

  <dt id="arg-n-fontface">n_fontface<a class="anchor" aria-label="anchor" href="#arg-n-fontface"></a></dt>
<dd><p>Either <code>TRUE</code> or <code>FALSE</code>, specifying whether the "n = X" texts in the main boxes should be <code>"normal"</code>, <code>"italic"</code>, <code>"bold"</code> or <code>"bolditalic"</code>.</p></dd>

  <dt id="arg-inclusion-text">inclusion_text<a class="anchor" aria-label="anchor" href="#arg-inclusion-text"></a></dt>
<dd><p>A named list specifying the text that should be used for the exclusion criteria reasons. This list should contain only names that have been used as inclusion criteria in the <code>inclusion</code> argument of the <code><a href="match_time.html">match_time</a></code> function.</p></dd>

  <dt id="arg-remove-lines">remove_0_lines<a class="anchor" aria-label="anchor" href="#arg-remove-lines"></a></dt>
<dd><p>Either <code>TRUE</code> or <code>FALSE</code>, specifying whether lines about 0 occurrences should be removed from the secondary boxes.</p></dd>

  <dt id="arg-remove-boxes">remove_0_boxes<a class="anchor" aria-label="anchor" href="#arg-remove-boxes"></a></dt>
<dd><p>Either <code>TRUE</code> or <code>FALSE</code>, specifying whether boxes that are basically empty because of 0 occurrences should be removed from the plot.</p></dd>

  <dt id="arg-perc-inclusion">perc_inclusion<a class="anchor" aria-label="anchor" href="#arg-perc-inclusion"></a></dt>
<dd><p>Either <code>TRUE</code> or <code>FALSE</code>, specifying whether percentages should be shown for the individual exclusion criteria reasons. What these percentages use as reference can be controlled using the <code>perc_type</code> argument.</p></dd>

  <dt id="arg-perc-inclusion-total">perc_inclusion_total<a class="anchor" aria-label="anchor" href="#arg-perc-inclusion-total"></a></dt>
<dd><p>Either <code>TRUE</code> or <code>FALSE</code>, specifying whether percentages should be shown for total numbers of individuals excluded because of the inclusion criteria.</p></dd>

  <dt id="arg-perc-other">perc_other<a class="anchor" aria-label="anchor" href="#arg-perc-other"></a></dt>
<dd><p>Either <code>TRUE</code> or <code>FALSE</code>, specifying whether percentages should be shown for all numbers in the side-boxes that are not related to the inclusion criteria.</p></dd>

  <dt id="arg-perc-type">perc_type<a class="anchor" aria-label="anchor" href="#arg-perc-type"></a></dt>
<dd><p>A single character string controlling what the calculated percentages for the inclusion criteria items should be in reference to. If <code>"all"</code>, the percentages will be in reference to the previous main box, e.g. the percentage of people not fulfilling the inclusion criteria X out of all people it was applied to. If <code>"excluded"</code> the percentage will be in reference to the number of individuals excluded due to the inclusion criteria instead.</p></dd>

  <dt id="arg-number-format">number_format<a class="anchor" aria-label="anchor" href="#arg-number-format"></a></dt>
<dd><p>A function that can be called on a vector of numbers and outputs those numbers as strings in some form. This can be used to ensure that the same number of digits is shown regardless of number, or to break up large numbers with commas or points. Defaults to the <code><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></code> function. Further arguments to this function may be passed through the <code>...</code> syntax.</p></dd>

  <dt id="arg-box-main-style">box_main_style<a class="anchor" aria-label="anchor" href="#arg-box-main-style"></a></dt>
<dd><p>A single character string, controlling which "style" the text in the main boxes should have. Should be either <code>"n_first"</code>, in which case the numbers appear before the text, or <code>"n_last"</code> in which the numbers appear after the text (default).</p></dd>

  <dt id="arg-box-main-text">box_main_text<a class="anchor" aria-label="anchor" href="#arg-box-main-text"></a></dt>
<dd><p>A named list of single character strings, specifying alternative text to the defaults printed in the main boxes. The names of the list should be one of <code>"box1"</code> (defining the text in the first box from the top), <code>"box2l"</code> (defining the text in the second box from the top on the left), <code>"box2r"</code> (defining the text in the second box from the top on the right), <code>"box3l"</code> (defining the text in the third box from the top on the left), <code>"box3r"</code> (defining the text in the third box from the top on the right), <code>"box4l"</code> (fourth box on the left), <code>"box4r"</code> (fourth box on the right). Set to <code><a href="https://rdrr.io/r/base/list.html" class="external-link">list()</a></code> to not change the text (default).</p></dd>

  <dt id="arg-box-main-halign">box_main_halign<a class="anchor" aria-label="anchor" href="#arg-box-main-halign"></a></dt>
<dd><p>Passed to the <code>halign</code> aesthetic in the <code><a href="https://wilkelab.org/ggtext/reference/geom_textbox.html" class="external-link">geom_textbox</a></code> function used for the main boxes.</p></dd>

  <dt id="arg-box-main-nudge-x">box_main_nudge_x<a class="anchor" aria-label="anchor" href="#arg-box-main-nudge-x"></a></dt>
<dd><p>Passed to the <code>nudge_x</code> argument in the <code><a href="https://wilkelab.org/ggtext/reference/geom_textbox.html" class="external-link">geom_textbox</a></code> function used for the main boxes.</p></dd>

  <dt id="arg-box-main-nudge-y">box_main_nudge_y<a class="anchor" aria-label="anchor" href="#arg-box-main-nudge-y"></a></dt>
<dd><p>Passed to the <code>nudge_y</code> argument in the <code><a href="https://wilkelab.org/ggtext/reference/geom_textbox.html" class="external-link">geom_textbox</a></code> function used for the main boxes.</p></dd>

  <dt id="arg-box-main-padding">box_main_padding<a class="anchor" aria-label="anchor" href="#arg-box-main-padding"></a></dt>
<dd><p>Passed to the <code>box.padding</code> argument in the <code><a href="https://wilkelab.org/ggtext/reference/geom_textbox.html" class="external-link">geom_textbox</a></code> function used for the main boxes.</p></dd>

  <dt id="arg-box-main-margin">box_main_margin<a class="anchor" aria-label="anchor" href="#arg-box-main-margin"></a></dt>
<dd><p>Passed to the <code>box.margin</code> argument in the <code><a href="https://wilkelab.org/ggtext/reference/geom_textbox.html" class="external-link">geom_textbox</a></code> function used for the main boxes.</p></dd>

  <dt id="arg-box-main-r">box_main_r<a class="anchor" aria-label="anchor" href="#arg-box-main-r"></a></dt>
<dd><p>Passed to the <code>box.r</code> argument in the <code><a href="https://wilkelab.org/ggtext/reference/geom_textbox.html" class="external-link">geom_textbox</a></code> function used for the main boxes.</p></dd>

  <dt id="arg-box-main-width">box_main_width<a class="anchor" aria-label="anchor" href="#arg-box-main-width"></a></dt>
<dd><p>Passed to the <code>width</code> argument in the <code><a href="https://wilkelab.org/ggtext/reference/geom_textbox.html" class="external-link">geom_textbox</a></code> function used for the main boxes.</p></dd>

  <dt id="arg-box-main-minwidth">box_main_minwidth<a class="anchor" aria-label="anchor" href="#arg-box-main-minwidth"></a></dt>
<dd><p>Passed to the <code>minwidth</code> argument in the <code><a href="https://wilkelab.org/ggtext/reference/geom_textbox.html" class="external-link">geom_textbox</a></code> function used for the main boxes.</p></dd>

  <dt id="arg-box-main-maxwidth">box_main_maxwidth<a class="anchor" aria-label="anchor" href="#arg-box-main-maxwidth"></a></dt>
<dd><p>Passed to the <code>maxwidth</code> argument in the <code><a href="https://wilkelab.org/ggtext/reference/geom_textbox.html" class="external-link">geom_textbox</a></code> function used for the main boxes.</p></dd>

  <dt id="arg-box-main-height">box_main_height<a class="anchor" aria-label="anchor" href="#arg-box-main-height"></a></dt>
<dd><p>Passed to the <code>height</code> argument in the <code><a href="https://wilkelab.org/ggtext/reference/geom_textbox.html" class="external-link">geom_textbox</a></code> function used for the main boxes.</p></dd>

  <dt id="arg-box-main-minheight">box_main_minheight<a class="anchor" aria-label="anchor" href="#arg-box-main-minheight"></a></dt>
<dd><p>Passed to the <code>minheight</code> argument in the <code><a href="https://wilkelab.org/ggtext/reference/geom_textbox.html" class="external-link">geom_textbox</a></code> function used for the main boxes.</p></dd>

  <dt id="arg-box-main-maxheight">box_main_maxheight<a class="anchor" aria-label="anchor" href="#arg-box-main-maxheight"></a></dt>
<dd><p>Passed to the <code>maxheight</code> argument in the <code><a href="https://wilkelab.org/ggtext/reference/geom_textbox.html" class="external-link">geom_textbox</a></code> function used for the main boxes.</p></dd>

  <dt id="arg-box-main-colour">box_main_colour<a class="anchor" aria-label="anchor" href="#arg-box-main-colour"></a></dt>
<dd><p>Passed to the <code>box.colour</code> aesthetic in the <code><a href="https://wilkelab.org/ggtext/reference/geom_textbox.html" class="external-link">geom_textbox</a></code> function used for the main boxes.</p></dd>

  <dt id="arg-box-main-fill">box_main_fill<a class="anchor" aria-label="anchor" href="#arg-box-main-fill"></a></dt>
<dd><p>Passed to the <code>fill</code> aesthetic in the <code><a href="https://wilkelab.org/ggtext/reference/geom_textbox.html" class="external-link">geom_textbox</a></code> function used for the main boxes.</p></dd>

  <dt id="arg-box-sec-text">box_sec_text<a class="anchor" aria-label="anchor" href="#arg-box-sec-text"></a></dt>
<dd><p>A named list of single character strings, specifying alternative text to the defaults printed in the secondary boxes. The names of the list should be one of <code>"box1l"</code> (defining the text in the first secondary box from the top on the left side), <code>"box1r"</code> (defining the text in the first secondary box from the top on the right), <code>"box2l1"</code> (defining the text for the unmatched in the second secondary box from the top on the left side), <code>"box2l2"</code> (defining the text for the inclusion criteria in the second secondary box from the top on the left side), <code>"box2r1"</code> (defining the text on how many controls were not used in the bottom right box), <code>"box2r2"</code> (defining the text on how many controls were used more than once in the bottom right box). Set to <code><a href="https://rdrr.io/r/base/list.html" class="external-link">list()</a></code> to not change the text (default).</p></dd>

  <dt id="arg-box-sec-halign">box_sec_halign<a class="anchor" aria-label="anchor" href="#arg-box-sec-halign"></a></dt>
<dd><p>Passed to the <code>halign</code> aesthetic in the <code><a href="https://wilkelab.org/ggtext/reference/geom_textbox.html" class="external-link">geom_textbox</a></code> function used for the secondary boxes.</p></dd>

  <dt id="arg-box-sec-nudge-x">box_sec_nudge_x<a class="anchor" aria-label="anchor" href="#arg-box-sec-nudge-x"></a></dt>
<dd><p>Passed to the <code>nudge_x</code> argument in the <code><a href="https://wilkelab.org/ggtext/reference/geom_textbox.html" class="external-link">geom_textbox</a></code> function used for the secondary boxes.</p></dd>

  <dt id="arg-box-sec-nudge-y">box_sec_nudge_y<a class="anchor" aria-label="anchor" href="#arg-box-sec-nudge-y"></a></dt>
<dd><p>Passed to the <code>nudge_y</code> argument in the <code><a href="https://wilkelab.org/ggtext/reference/geom_textbox.html" class="external-link">geom_textbox</a></code> function used for the secondary boxes.</p></dd>

  <dt id="arg-box-sec-padding">box_sec_padding<a class="anchor" aria-label="anchor" href="#arg-box-sec-padding"></a></dt>
<dd><p>Passed to the <code>box.padding</code> argument in the <code><a href="https://wilkelab.org/ggtext/reference/geom_textbox.html" class="external-link">geom_textbox</a></code> function used for the secondary boxes.</p></dd>

  <dt id="arg-box-sec-margin">box_sec_margin<a class="anchor" aria-label="anchor" href="#arg-box-sec-margin"></a></dt>
<dd><p>Passed to the <code>box.margin</code> argument in the <code><a href="https://wilkelab.org/ggtext/reference/geom_textbox.html" class="external-link">geom_textbox</a></code> function used for the secondary boxes.</p></dd>

  <dt id="arg-box-sec-r">box_sec_r<a class="anchor" aria-label="anchor" href="#arg-box-sec-r"></a></dt>
<dd><p>Passed to the <code>box.r</code> argument in the <code><a href="https://wilkelab.org/ggtext/reference/geom_textbox.html" class="external-link">geom_textbox</a></code> function used for the secondary boxes.</p></dd>

  <dt id="arg-box-sec-width">box_sec_width<a class="anchor" aria-label="anchor" href="#arg-box-sec-width"></a></dt>
<dd><p>Passed to the <code>width</code> argument in the <code><a href="https://wilkelab.org/ggtext/reference/geom_textbox.html" class="external-link">geom_textbox</a></code> function used for the secondary boxes.</p></dd>

  <dt id="arg-box-sec-minwidth">box_sec_minwidth<a class="anchor" aria-label="anchor" href="#arg-box-sec-minwidth"></a></dt>
<dd><p>Passed to the <code>minwidth</code> argument in the <code><a href="https://wilkelab.org/ggtext/reference/geom_textbox.html" class="external-link">geom_textbox</a></code> function used for the secondary boxes.</p></dd>

  <dt id="arg-box-sec-maxwidth">box_sec_maxwidth<a class="anchor" aria-label="anchor" href="#arg-box-sec-maxwidth"></a></dt>
<dd><p>Passed to the <code>maxwidth</code> argument in the <code><a href="https://wilkelab.org/ggtext/reference/geom_textbox.html" class="external-link">geom_textbox</a></code> function used for the secondary boxes.</p></dd>

  <dt id="arg-box-sec-height">box_sec_height<a class="anchor" aria-label="anchor" href="#arg-box-sec-height"></a></dt>
<dd><p>Passed to the <code>height</code> argument in the <code><a href="https://wilkelab.org/ggtext/reference/geom_textbox.html" class="external-link">geom_textbox</a></code> function used for the secondary boxes.</p></dd>

  <dt id="arg-box-sec-minheight">box_sec_minheight<a class="anchor" aria-label="anchor" href="#arg-box-sec-minheight"></a></dt>
<dd><p>Passed to the <code>minheight</code> argument in the <code><a href="https://wilkelab.org/ggtext/reference/geom_textbox.html" class="external-link">geom_textbox</a></code> function used for the secondary boxes.</p></dd>

  <dt id="arg-box-sec-maxheight">box_sec_maxheight<a class="anchor" aria-label="anchor" href="#arg-box-sec-maxheight"></a></dt>
<dd><p>Passed to the <code>maxheight</code> argument in the <code><a href="https://wilkelab.org/ggtext/reference/geom_textbox.html" class="external-link">geom_textbox</a></code> function used for the secondary boxes.</p></dd>

  <dt id="arg-box-sec-colour">box_sec_colour<a class="anchor" aria-label="anchor" href="#arg-box-sec-colour"></a></dt>
<dd><p>Passed to the <code>box.colour</code> argument in the <code><a href="https://wilkelab.org/ggtext/reference/geom_textbox.html" class="external-link">geom_textbox</a></code> function used for the secondary boxes.</p></dd>

  <dt id="arg-box-sec-fill">box_sec_fill<a class="anchor" aria-label="anchor" href="#arg-box-sec-fill"></a></dt>
<dd><p>Passed to the <code>fill</code> argument in the <code><a href="https://wilkelab.org/ggtext/reference/geom_textbox.html" class="external-link">geom_textbox</a></code> function used for the secondary boxes.</p></dd>

  <dt id="arg-line-main-colour">line_main_colour<a class="anchor" aria-label="anchor" href="#arg-line-main-colour"></a></dt>
<dd><p>The colour of the main lines connecting the main boxes.</p></dd>

  <dt id="arg-line-main-linetype">line_main_linetype<a class="anchor" aria-label="anchor" href="#arg-line-main-linetype"></a></dt>
<dd><p>The type of the lines connecting the main boxes.</p></dd>

  <dt id="arg-line-main-linewidth">line_main_linewidth<a class="anchor" aria-label="anchor" href="#arg-line-main-linewidth"></a></dt>
<dd><p>The width of the lines connecting the main boxes.</p></dd>

  <dt id="arg-line-sec-colour">line_sec_colour<a class="anchor" aria-label="anchor" href="#arg-line-sec-colour"></a></dt>
<dd><p>The color of the lines connecting the secondary boxes to the main lines.</p></dd>

  <dt id="arg-line-sec-linetype">line_sec_linetype<a class="anchor" aria-label="anchor" href="#arg-line-sec-linetype"></a></dt>
<dd><p>The type of the lines connecting the secondary boxes to the main lines.</p></dd>

  <dt id="arg-line-sec-linewidth">line_sec_linewidth<a class="anchor" aria-label="anchor" href="#arg-line-sec-linewidth"></a></dt>
<dd><p>The width of the lines connecting the secondary boxes to the main lines.</p></dd>

  <dt id="arg-arrow">arrow<a class="anchor" aria-label="anchor" href="#arg-arrow"></a></dt>
<dd><p>Either <code>TRUE</code> or <code>FALSE</code>, specifying whether to draw arrows on the main lines.</p></dd>

  <dt id="arg-arrow-type">arrow_type<a class="anchor" aria-label="anchor" href="#arg-arrow-type"></a></dt>
<dd><p>The angle of the arrow head in degrees (smaller numbers produce narrower, pointier arrows). Essentially describes the width of the arrow head. Ignored if <code>arrow=FALSE</code>.</p></dd>

  <dt id="arg-arrow-angle">arrow_angle<a class="anchor" aria-label="anchor" href="#arg-arrow-angle"></a></dt>
<dd><p>The type of the arrow heads drawn, ignored if <code>arrow=FALSE</code>.</p></dd>

  <dt id="arg-arrow-vjust">arrow_vjust<a class="anchor" aria-label="anchor" href="#arg-arrow-vjust"></a></dt>
<dd><p>A single number that may be used to shift the arrow heads up or down. This is probably needed in order to correctly place the arrows. If this does not work, users are encouraged to set <code>arrow=FALSE</code> and add their own arrows using the <code><a href="https://ggplot2.tidyverse.org/reference/geom_segment.html" class="external-link">geom_segment</a></code> function.</p></dd>

  <dt id="arg-arrow-size">arrow_size<a class="anchor" aria-label="anchor" href="#arg-arrow-size"></a></dt>
<dd><p>The size of the drawn arrow heads, ignored if <code>arrow=FALSE</code>.</p></dd>

  <dt id="arg-xlim">xlim<a class="anchor" aria-label="anchor" href="#arg-xlim"></a></dt>
<dd><p>The x limits of the plot. Should usually stay at the values given here, because the positions of the boxes are hard-coded. They can, however, be changed to allow drawing more boxes etc. To change the size of the boxes, arguments starting with <code>box_main_</code> or <code>box_sec_</code> should be more useful.</p></dd>

  <dt id="arg-ylim">ylim<a class="anchor" aria-label="anchor" href="#arg-ylim"></a></dt>
<dd><p>The y limits of the plot. See argument <code>xlim</code>.</p></dd>

  <dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Further arguments passed to the <code>number_format</code> function.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>


<p>Below are some FAQ about this type of flowchart and the function itself.</p>
<p><strong><em>Why are the shown values so weird?</em></strong></p>
<p>Multiple of the numbers in the resulting flowchart may seem confusing at first. First of all, the number of potential cases + the number of potential controls is (at least at first) usually much larger than the total amount of data available. The reason for this is that all individuals that do not get treated at \(t = 0\) can, theoretically, be used as control before they receive the treatment.</p>
<p>Similarly, sometimes some people do not meet multiple inclusion criteria at the same time, resulting in them being counted more than once in the respective list of reasons for inclusion. The percentages in parenthesis (if shown) are therefore in respect to the total number of potential controls / cases still available at time of exclusion, not to the total number of excluded individuals.</p>
<p>Finally, the resulting matched dataset (matched cases + matched controls) may be larger than the total input data, even if <code>replace_over_t=FALSE</code> and <code>replace_at_t=FALSE</code>. This is again because, unless <code>replace_cases=FALSE</code> is used, individuals used as controls may later become cases and are thus included twice in the output data. To get the number of distinct individuals in the resulting data instead, one simply needs to call <code>length(unique(data$id))</code> on the final matched dataset.</p>
<p><strong><em>How do I make all the text fit on a page?</em></strong></p>
<p>Usually, the resulting plot will look very poorly in the lower right corner of an interactive R studio session. Only when clicking the "zoom" button, a much better version will appear. This is because the plot is usually way too big to fit in the corner. When saving to a file it therefore usually makes sense to make the <code>width</code> and <code>height</code> parameters rather large to get the same effect. Users are encouraged to play around with these parameters. Additional optimisations can be done through the various arguments relating to the boxes.</p>
<p><strong><em>Can I add more boxes?</em></strong></p>
<p>When using this function for a publication, it might make sense to add more boxes below the plot with additional information. This may be done using regular <span class="pkg">ggplot2</span> syntax. The boxes can be created using the <code><a href="https://wilkelab.org/ggtext/reference/geom_textbox.html" class="external-link">geom_textbox</a></code> function from the <span class="pkg">ggtext</span> package. Lines and arrows are drawn simply using the <code><a href="https://ggplot2.tidyverse.org/reference/geom_segment.html" class="external-link">geom_segment</a></code> function.</p>
<p><strong><em>Why are the arrows placed so poorly?</em></strong></p>
<p>Because the actual width of the boxes is dependent on the size of the plot and internally the boxes and lines are independent of one another, there is no simple way to make the arrows fit right on top of the boxes naturally. Users can usually create the desired effect by changing the <code>arrow_hjust</code> argument through trial and error. If this fails, users may set <code>arrow=FALSE</code> and add their own arrows using the <code><a href="https://ggplot2.tidyverse.org/reference/geom_segment.html" class="external-link">geom_segment</a></code> function.</p>
    </div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Returns a standard <code>ggplot2</code> object that can be saved with a <code><a href="https://ggplot2.tidyverse.org/reference/ggsave.html" class="external-link">ggsave</a></code> call.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Robin Denz</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="match_time.html">match_time</a></code>, <code><a href="plot.match_time.html">plot.match_time</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-datatable.com" class="external-link">data.table</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/RobinDenz1/MatchTime" class="external-link">MatchTime</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">12341234</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"survival"</span><span class="op">)</span> <span class="op">&amp;</span> <span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"ggplot2"</span><span class="op">)</span> <span class="op">&amp;</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"ggplot2"</span><span class="op">)</span> <span class="op">&amp;</span> <span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"ggtext"</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://wilkelab.org/ggtext/" class="external-link">ggtext</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/therneau/survival" class="external-link">survival</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># load heart dataset from survival package</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"heart"</span>, package<span class="op">=</span><span class="st">"survival"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># add some random variables that will be used as inclusion criteria</span></span></span>
<span class="r-in"><span><span class="co"># (in reality you would already have them)</span></span></span>
<span class="r-in"><span><span class="va">heart</span><span class="op">$</span><span class="va">A</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">FALSE</span><span class="op">)</span>, size<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">heart</span><span class="op">)</span>, replace<span class="op">=</span><span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>                  prob<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.9</span>, <span class="fl">0.1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">heart</span><span class="op">$</span><span class="va">B</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">FALSE</span><span class="op">)</span>, size<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">heart</span><span class="op">)</span>, replace<span class="op">=</span><span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>                  prob<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.9</span>, <span class="fl">0.1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">heart</span><span class="op">$</span><span class="va">C</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">FALSE</span><span class="op">)</span>, size<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">heart</span><span class="op">)</span>, replace<span class="op">=</span><span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>                  prob<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.9</span>, <span class="fl">0.1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># perform some time-dependent matching with inclusion criteria</span></span></span>
<span class="r-in"><span><span class="va">m_objs</span> <span class="op">&lt;-</span> <span class="fu"><a href="match_time.html">match_time</a></span><span class="op">(</span><span class="va">transplant</span> <span class="op">~</span> <span class="va">surgery</span>, data<span class="op">=</span><span class="va">heart</span>, id<span class="op">=</span><span class="st">"id"</span>,</span></span>
<span class="r-in"><span>                     match_method<span class="op">=</span><span class="st">"fast_exact"</span>, method<span class="op">=</span><span class="st">"brsm"</span>,</span></span>
<span class="r-in"><span>                     replace_over_t<span class="op">=</span><span class="cn">TRUE</span>, ratio<span class="op">=</span><span class="fl">1</span>,</span></span>
<span class="r-in"><span>                     inclusion<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># plot the flowchart</span></span></span>
<span class="r-in"><span><span class="fu">plot_flowchart</span><span class="op">(</span><span class="va">m_objs</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Loading required namespace: ggtext</span>
<span class="r-plt img"><img src="plot_flowchart-1.png" alt="" width="700" height="433"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Robin Denz.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

