<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Combines rows with the same values in start-stop data — simplify_start_stop • MatchTime</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Combines rows with the same values in start-stop data — simplify_start_stop"><meta name="description" content='Given a data.table-like object containing information in the start-stop format, this function searches for consecutive intervals where values of specific covariates do not change and "simplifies" the dataset by combining these interval into one interval. This may be useful to reduce RAM usage and computation time when dealing with large start-stop data.'><meta property="og:description" content='Given a data.table-like object containing information in the start-stop format, this function searches for consecutive intervals where values of specific covariates do not change and "simplifies" the dataset by combining these interval into one interval. This may be useful to reduce RAM usage and computation time when dealing with large start-stop data.'><meta property="og:image" content="https://robindenz1.github.io/MatchTime/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">MatchTime</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/creating_start_stop_data.html">Creating and Dealing with Start-Stop Data in R</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/RobinDenz1/MatchTime/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Combines rows with the same values in start-stop data</h1>

      <div class="d-none name"><code>simplify_start_stop.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Given a <code>data.table</code>-like object containing information in the start-stop format, this function searches for consecutive intervals where values of specific covariates do not change and "simplifies" the dataset by combining these interval into one interval. This may be useful to reduce RAM usage and computation time when dealing with large start-stop data.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">simplify_start_stop</span><span class="op">(</span><span class="va">data</span>, <span class="va">id</span>, start<span class="op">=</span><span class="st">"start"</span>, stop<span class="op">=</span><span class="st">"stop"</span>,</span>
<span>                    <span class="va">cols</span>, remove_other_cols<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <p></p>
<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>A <code>data.table</code> like object including at least four columns: <code>id</code> (the case identifier), <code>start</code> (the beginning of the time-interval), <code>stop</code> (the end of the time-interval) and one or more arbitrary columns. May also be any object that can be coerced to be a <code>data.table</code>, such as a <code>data.frame</code> or a <code>tibble</code>. Intervals should be <em>right-open</em> (e.g. coded as <code>[start, stop)</code>).</p></dd>

  <dt id="arg-id">id<a class="anchor" aria-label="anchor" href="#arg-id"></a></dt>
<dd><p>A single character string specifying a column in <code>data</code> containing the case identifiers.</p></dd>

  <dt id="arg-start">start<a class="anchor" aria-label="anchor" href="#arg-start"></a></dt>
<dd><p>A single character string specifying a column in <code>data</code> specifying the beginning of a time-interval. Defaults to <code>"start"</code>.</p></dd>

  <dt id="arg-stop">stop<a class="anchor" aria-label="anchor" href="#arg-stop"></a></dt>
<dd><p>A single character string specifying a column in <code>data</code> specifying the ending of a time-interval. Defaults to <code>"stop"</code>.</p></dd>

  <dt id="arg-cols">cols<a class="anchor" aria-label="anchor" href="#arg-cols"></a></dt>
<dd><p>A character vector specifying the columns that should be used to check whether the intervals are unique. If not specified, all columns other than <code>id</code>, <code>start</code> and <code>stop</code> will be used.</p></dd>

  <dt id="arg-remove-other-cols">remove_other_cols<a class="anchor" aria-label="anchor" href="#arg-remove-other-cols"></a></dt>
<dd><p>Either <code>TRUE</code> or <code>FALSE</code>, specifying whether the columns <em>not</em> named in the <code>cols</code> argument (other than <code>id</code>, <code>start</code>, <code>stop</code>) should be removed from the output. Defaults to <code>TRUE</code>, because keeping these columns may be misleading. If set to <code>FALSE</code>, please remember that the value of these columns is not neccesarily correct, since intervals have been combined without looking at their values first.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The intervals defined by the <code>start</code> and <code>stop</code> columns are expected to be coded as <code>[start, stop)</code>, meaning that the value of <code>start</code> must always be equal to the value of <code>stop</code> in the previous row. Intervals of length 0 are not supported and will produce an error message.</p>
<p>Note that if the input <code>data</code> contains events, users probably want to exclude these event columns from the <code>cols</code> argument. The reason is that the <code>data</code> may contain consecutive intervals that are indeed exactly the same, but refer to two separate events (because intervals always end when an event indicator is <code>TRUE</code>).</p>
    </div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Returns a single <code>data.table</code> containing the simplified dataset.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Robin Denz</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="merge_start_stop.html">merge_start_stop</a></code>, <code><a href="fill_gaps_start_stop.html">fill_gaps_start_stop</a></code>, <code><a href="subset_start_stop.html">subset_start_stop</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/RobinDenz1/MatchTime" class="external-link">MatchTime</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-datatable.com" class="external-link">data.table</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># get some fake example data</span></span></span>
<span class="r-in"><span><span class="va">data1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table</a></span><span class="op">(</span>id<span class="op">=</span><span class="fl">1</span>,</span></span>
<span class="r-in"><span>                    start<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">20</span>, <span class="fl">35</span>, <span class="fl">120</span>, <span class="fl">923</span>, <span class="fl">1022</span>, <span class="fl">2000</span>, <span class="fl">3011</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                    stop<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">20</span>, <span class="fl">35</span>, <span class="fl">120</span>, <span class="fl">923</span>, <span class="fl">1022</span>, <span class="fl">2000</span>, <span class="fl">3011</span>, <span class="fl">3013</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                    A<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                    B<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                    C<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">11</span>, <span class="fl">0.2</span>, <span class="fl">17.8</span>, <span class="fl">2.1</span>, <span class="fl">9.0001</span>, <span class="fl">1.2</span>, <span class="fl">33</span>, <span class="fl">22</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">data2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table</a></span><span class="op">(</span>id<span class="op">=</span><span class="fl">2</span>,</span></span>
<span class="r-in"><span>                    start<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">20</span>, <span class="fl">35</span>, <span class="fl">120</span>, <span class="fl">923</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                    stop<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">20</span>, <span class="fl">35</span>, <span class="fl">120</span>, <span class="fl">923</span>, <span class="fl">1022</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                    A<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                    B<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                    C<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">11</span>, <span class="fl">0.2</span>, <span class="fl">17.8</span>, <span class="fl">2.1</span>, <span class="fl">9.0001</span><span class="op">)</span><span class="op">+</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">data1</span>, <span class="va">data2</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># simplify in regards to columns "A" and "B"</span></span></span>
<span class="r-in"><span><span class="va">out</span> <span class="op">&lt;-</span> <span class="fu">simplify_start_stop</span><span class="op">(</span><span class="va">data</span>, id<span class="op">=</span><span class="st">"id"</span>, cols<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">out</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Key: &lt;id, start&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        id start  stop     A     B</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     &lt;num&gt; &lt;num&gt; &lt;num&gt; &lt;num&gt; &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1:     1     1    20     0     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2:     1    20   120     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3:     1   120   923     1     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4:     1   923  1022     1     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5:     1  1022  3013     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  6:     2     1    20     0     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  7:     2    20    35     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  8:     2    35   120     1     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  9:     2   120   923     1     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10:     2   923  1022     1     0</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># simplify in regards to column "A" only</span></span></span>
<span class="r-in"><span><span class="va">out</span> <span class="op">&lt;-</span> <span class="fu">simplify_start_stop</span><span class="op">(</span><span class="va">data</span>, id<span class="op">=</span><span class="st">"id"</span>, cols<span class="op">=</span><span class="st">"A"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">out</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Key: &lt;id, start&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       id start  stop     A</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    &lt;num&gt; &lt;num&gt; &lt;num&gt; &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:     1     1   120     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:     1   120  1022     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:     1  1022  3013     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4:     2     1    35     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5:     2    35  1022     1</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># calling it without specifying "cols" results in no changes,</span></span></span>
<span class="r-in"><span><span class="co"># because C always changes over the defined intervals</span></span></span>
<span class="r-in"><span><span class="va">out</span> <span class="op">&lt;-</span> <span class="fu">simplify_start_stop</span><span class="op">(</span><span class="va">data</span>, id<span class="op">=</span><span class="st">"id"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">out</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Key: &lt;id, start&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        id start  stop     A     B       C</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     &lt;num&gt; &lt;num&gt; &lt;num&gt; &lt;num&gt; &lt;num&gt;   &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1:     1     1    20     0     1 11.0000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2:     1    20    35     0     0  0.2000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3:     1    35   120     0     0 17.8000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4:     1   120   923     1     1  2.1000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5:     1   923  1022     1     0  9.0001</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  6:     1  1022  2000     0     0  1.2000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  7:     1  2000  3011     0     0 33.0000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  8:     1  3011  3013     0     0 22.0000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  9:     2     1    20     0     1 12.0000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10:     2    20    35     0     0  1.2000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11:     2    35   120     1     0 18.8000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12:     2   120   923     1     1  3.1000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13:     2   923  1022     1     0 10.0001</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Robin Denz.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

